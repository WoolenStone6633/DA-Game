<!DOCTYPE html>
<html>
    <head>
        <title>Solitaire</title>
        <style type="text/css">
#game_board {position:absolute; left:11%;  width:75%;}
#board {position:relative; width:100%; z-index:-2}
#redo {position: absolute; opacity:0.9; left:1%; top:0%; width:11.4%; z-index:-1}
#heart_back {position:absolute; opacity:0.7; left:56%; top:0%; width:10%; z-index:-1}
#diamond_back {position:absolute; opacity:0.7; left:67%; top:0%; width:10%; z-index:-1}
#club_back {position:absolute; opacity:0.7; left:78%; top:0%; width:10%; z-index:-1}
#spade_back {position:absolute; opacity:0.7; left:89%; top:0%; width:10%; z-index:-1}
#stack {position:absolute; left:1.5%; top:0%; width:100%}
#column0 {position:absolute; left:3%; top:25%; width:100%}
#column1 {position:absolute; left:17%; top:25%; width:100%; height: 100%}
#column2 {position:absolute; left:31%; top:25%; width:100%; height: 100%}
#column3 {position:absolute; left:45%; top:25%; width:100%; height: 100%}
#column4 {position:absolute; left:59%; top:25%; width:100%; height: 100%}
#column5 {position:absolute; left:73%; top:25%; width:100%; height: 100%}
#column6 {position:absolute; left:87%; top:25%; width:100%; height: 100%}
.card {position:absolute; width:10.4%; z-index:0}
        </style>
        <script> //Class to define a playing card and it's properties
            class Cards {
                value;
                suit;
                constructor(value, suit){
                    this.value = value;
                    this.suit = suit;
                }
                get value() {
                    return this.value;
                }
                get suit() {
                    return this.suit;
                }
                get id() {
                   return  this.value + "_of_" + this.suit;
                }
                get link() {
                    return "Playing Cards/" + this.value + "_of_" + this.getSuit(this.suit) + ".png";
                }
                getSuit(suit) {
                    if (suit == 0) {
                        return "hearts";
                    } else if (suit == 1) {
                        return "diamonds";
                    } else if (suit == 2) {
                        return "clubs";
                    } else if (suit == 3) {
                        return "spades";
                    }
                }
                flip(){
                    //Make the card flip no matter which side is showing
                }
            }
            var column0 = [];
            var column1 = [];
            var column2 = [];
            var column3 = [];
            var column4 = [];
            var column5 = [];
            var column6 = [];
            var heartStack = [];
            var diamondStack = [];
            var clubStack = [];
            var spadeStack = [];
            var resetStack = [];
            var discardStack = [];
            
            function moveCard(moveFrom, moveTo){
                moveFrom.push(moveTo.pop());
                updateCards();
                return;
            }
        </script>

        <script> //For setting up the board. Placing cards, randomizing their order, etc.
            function setGame() {
                let initialStack = []
                for (let suit = 0; suit < 4; suit++) {
                    for (let value = 1; value <= 13; value++) {
                        let card = new Cards(value, suit);
                        initialStack.push(card);
                    }
                }
                randomizer(initialStack); //The code commented out right below lets you see the randomized output of the randomizer funciton
                /*for (let i = 0; i < initialStack.length; i++)
                    console.log(initialStack[i].id);*/

                let temp = 0;
                for (let i = (initialStack.length -1); i >= 0; i--) { //Takes the last element on the array and puts it on the board
                    if (i >= 28) {
                        placeCard(initialStack[i], "stack");
                    } else if (i == 27) {
                        placeCard(initialStack[i], "column0");
                    } else if (i >= 25) {
                        placeCard(initialStack[i], "column1");
                        shiftDown(initialStack[i].id, temp);
                        temp += 3.3;
                    } else if (i >= 22) {
                        if (i == 24) {
                            temp = 0;
                        }
                        placeCard(initialStack[i], "column2");
                        shiftDown(initialStack[i].id, temp);
                        temp += 3.3;
                    } else if (i >= 18) {
                        if (i == 21) {
                            temp = 0;
                        }
                        placeCard(initialStack[i], "column3");
                        shiftDown(initialStack[i].id, temp);
                        temp += 3.3;
                    } else if (i >= 13) {
                        if (i == 17) {
                            temp = 0;
                        }
                        placeCard(initialStack[i], "column4");
                        shiftDown(initialStack[i].id, temp);
                        temp += 3.3;
                    } else if (i >= 7) {
                        if (i == 12) {
                            temp = 0;
                        }
                        placeCard(initialStack[i], "column5");
                        shiftDown(initialStack[i].id, temp);
                        temp += 3.3;
                    } else if (i >= 0) {
                        if (i == 6) {
                            temp = 0;
                        }
                        placeCard(initialStack[i], "column6");
                        shiftDown(initialStack[i].id, temp);
                        temp += 3.3;
                    }
                }
                //When adding a new card to the stack, take the top% parameter of the last child node in the column and add 3.3 to it
            }
        </script>

        <script>
            function placeCard(card, locatoin){
                let domCard = document.createElement("div");
                domCard.id = card.id;
                domCard.classList.add("card");
                document.getElementById(locatoin).append(domCard);

                let img = document.createElement("img");
                img.src = card.link;
                img.style.width = "100%";
                document.getElementById(card.id).appendChild(img);
            }
        </script>

        <script>
            function shiftDown(item, amount) {
                document.getElementById(item).style.top = (Math.ceil(parseInt(window.getComputedStyle(document.getElementById(item))["top"])/parseInt(window.getComputedStyle(document.getElementById("board"))["height"]) * 100) + amount) + "%";
            }
        </script>

        <script> //Script for randomizing the order of any array
            function randomizer(array){
                for (let i = 0; i < array.length; i++) {
                    let temp = Math.floor(Math.random() * (array.length));
                    [array[temp], array[i]] = [array[i], array[temp]];
                }
            }
         </script>
    </head>
    <body onload="setGame()">
        <div id="game_board">
            <div id="board">
                <img src="Board assets/Felt_table.jpg" alt="felt table" width="100%">
            </div>
            <div id="redo">
                <img src="Board assets/Screenshot 2023-09-25 192652.png" alt="felt table" width="100%">
            </div>
            <div id="club_back">
                <img src="Board assets/Club_Back.png" width="100%">
            </div>
            <div id="spade_back">
                <img src="Board assets/Spade_Back.png" width="100%">
            </div>
            <div id="heart_back">
                <img src="Board assets/Heart_Back.png" width="100%">
            </div>
            <div id="diamond_back">
                <img src="Board assets/Diamond_Back.png" width="100%">
            </div>
            <div id="stack"></div>
            <div id="column0"></div>
            <div id="column1"></div>
            <div id="column2"></div>
            <div id="column3"></div>
            <div id="column4"></div>
            <div id="column5"></div>
            <div id="column6"></div>
        </div>
    </body>
</html>
